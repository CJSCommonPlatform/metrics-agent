language: java
jdk:
  - oraclejdk8
cache:
  directories:
    - "$HOME/.m2"
before_install:
  - git clone https://github.com/CJSCommonPlatform/travis-settings.git target/travis-settings
install:
  - cp -f $JAVA_HOME/jre/lib/security/cacerts target/travis-settings/cacerts
  - chmod u+w target/travis-settings/cacerts
  - $JAVA_HOME/jre/bin/keytool -import -v -noprompt -storepass changeit -storetype jks -trustcacerts -alias IndigoBlueRoot -file target/travis-settings/ROOT-CA.crt -keystore target/travis-settings/cacerts
script: mvn -Djavax.net.ssl.trustStore=$PWD/target/travis-settings/cacerts -B -C -V -U --settings target/travis-settings/settings.xml verify coveralls:report
after_success:
  - '[[ $TRAVIS_BRANCH == "master" && $TRAVIS_PULL_REQUEST == "false" && $TRAVIS_TAG != release-* ]] && mvn -Djavax.net.ssl.trustStore=$PWD/target/travis-settings/cacerts -DskipTests=true -B -C -V --errors deploy --settings target/travis-settings/settings.xml'
  - '[[ $TRAVIS_TAG == release-* ]] && mvn -Prelease -Djavax.net.ssl.trustStore=$PWD/target/travis-settings/cacerts -DskipTests=true -B -C -V --errors deploy --settings target/travis-settings/settings.xml'
notifications:
  slack:
    secure: fPlaMvrczZ2riJ4tjMOAqxSGj4JfxGlH/K08knLgG4T/n6EL4LN4+184Npz9XueNbV3m26WUrPkbXEiWXpqkKsbwcZXqqnFxGacGiyxv7LeBeQLYp7NFeARAyB5qDwUpjHlCPAEoAeyeGsZNrpui/wceY4j1tB7ObfdwbxLzAO0tekdbwitSaK1cc7V2sVHkBYr7ChuC+dVO1pshPw0EVTmzPioS8nfFKPaxWoMgyRAuYe7MD0U7DxNQ4Wzsb7tpfd5Oom1wLXyZ7M3wwSMMamIAAxHVG389Az6YvN7hXQggTGDawf/YwVOaoMR2bh7uHBCOiNZO1GbRTOA7IuTPwT7GsK94THRtfvqNm7RFBPkoD4657FATnk2o5c7QNTY3dAlYLsxLnS6mVTL/vAbqC7BbDHo/UGsxmOusQtKt8sRoL8pOCEInHaS3b88Osl7u7oYO/E4YTptdnkEe8tNyWWdx34nEUT0j1Mu/VAN38YcgTMUuiBU6chkMJ5BjIHisJlAAnBJ9VGgF9liqnigNwAGhbrHZPyAlKUX8HLejpD+t4aR0UaEvvauh6aHh4pYm0mZra4zOBC/lBDOXqsu5ajHL8LpHc6j+5FrmNwciiTVoxdud2S4c0U2ymr3L07ivX+UyhoraS9oSH3v7L73Q4NyvuAmD8Zc0xw/cR4Pff9c=
env:
  global:
  - secure: J7LOeaStYA4xDLFOrlGpbVsj0sZpdOan9LTpScyf//C40w5FMlevMiq+NiYJf7IZrwTV8ZEigNvrBQSJlfUd/chr59ezgm0QhKien3lmGu1RV4itEcHI5uRq2K8NsDdtuYmKWOrTgfuFoQPW91Nzt9w9a5nERhSHgZSJAaKhKzcpR6bpt4ahPQ6KNjPy+27hzw7xW5p1CKjhatGcKZD2aZIwiXLKWHH/XSYZmN2e/74a6s3AuqWdv0UJLfQ7dVZo2ea8K6o+jleUyxyRzJWbnuOqBkgRTy02v9Gim20qpVstCqzAX3Ul9BIs67QoEkgASR+wYj6jeC467dSqMGKJQF097hZ4Nfls/C7pJgTdri2l8jbJ+RVazvuoftt+iCH11LI1dU5D4AVmMSufM3XDZKwSTaxKd7JgtTh89lnFa0dF0WBT29BUtte0yoL1fPmpeCItony0+GgqUcTrvxFfVP3B46UGyA4FSqkTORqzXKW+s4GF/XkTnNYvmFubOcTMy0vFw6gma/sfQH1OStJKL+bNFUPUjezBGG2hwPEzssLGDvazcvVVSEtLlBZe6Bkv0XM5cblpkZoTOyzR1M26LyEemQ19IDQj71vOOOI3GXXLrpnejW32aestkSnvAcNRDezPlHgFZ0vT240Hs5YvHXgOivyUN4lK4Hrl8dbdrmc=
  - secure: MpgQbjcVs1ndXel0k1/QWBVDJon77Tk7shQCA6IoA8+exDqwdoCWMcQ0+UyBjd+pG8jLo3Li+j6gyTR5kFd4GrwVs0zkQZSX9/EW+wpEZaBJtlN164MysI9QETu8sqA/Q+Qr8Xw4u5egny2/1w2f86zUMLsjD+oKpXE521RdlULlBVzrfyC3sXAJVybueTH+1J+YV97ECGQhuXvFW5i5/1kogm2+w0RJqdEcYY3Jgt8yDzJu08uPU8sp0pR51XAigNqPODFbbf75Y/7MKWo0o4xHy8NYGJC6+dpLMwJ8/BMHeIMLvTvZYsQyuD0oG/DVxE9fKeC/XAZ0o3X6uxbGlGyEVUHBp3iezYvObfXre99EsgQCHZ0IK/hIiDDSLi2YVKuzG1NUyZQaX3f0wy6RXinh6eKQFrkT++E3L0UEtSd9JZBUIGZl/8GLlcGLVxsmLg5azI5/kjfGssTzNgALP1Q2ykKFmARFauwonuw93ICagpSMrGhednCCYq7TFMnujM3nSWgsoeJ+nBQvkFykufEL9tj7zAgG4KbKIxVSGb3sHxDMyo9w8JB2YHdvlpwFyhWtb27jKcaVEhfqjxh1ti0rQdBvY4FIoclZ+ji4aWAjB2r8meKe5q/B/hWwZpdRaXgMWQVHMBhw9Ifp4QfD1f3RvHBdzaWQlLMCzjiuyfA=
